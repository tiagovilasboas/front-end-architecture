---
// src/components/sections/NavMenu.astro
export interface Props {
  patternsByCategory: Record<string, any[]>;
  currentPath: string;
}

const { patternsByCategory, currentPath } = Astro.props;
---
<nav class="nav-links">
  <ul>
    <li class="category-group">
      <p class="category-title">Guias de Decisão</p>
      <ul>
        <li class="nav-item" data-name="como escolher sua arquitetura guia" data-keywords="guias decisão arquitetura escolher">
          <a href="/guides/how-to-choose/" class:list={{ active: currentPath.startsWith('/guides/') }}>
            Como Escolher...
          </a>
        </li>
      </ul>
    </li>
    {Object.entries(patternsByCategory).map(([category, patterns]) => (
      <li class="category-group">
        <p class="category-title">{category}</p>
        <ul>
          {patterns.map(pattern => {
            const href = `/patterns/${pattern.slug}/`;
            const isActive = currentPath === href;
            return (
              <li class="nav-item" data-name={pattern.data.title.toLowerCase()} data-keywords={pattern.slug}>
                <a href={href} class:list={{ active: isActive }}>
                  {pattern.data.title}
                </a>
              </li>
            );
          })}
        </ul>
      </li>
    ))}
  </ul>
</nav>

